!function(){"use strict";angular.module("tagsInput",["autoGrowInput","selectOptions","disableAll","ngSanitize"])}(),angular.module("tagsInput").run(["$templateCache",function(e){e.put("tags-input.html",'<div class="tags-input" ng-attr-style="max-width: {{ containerWidth }}px" disable-all="disabled">\n    <div ng-repeat="tag in getTags()" class="token-item">\n        <div class="token" tabindex="{{ $index }}"\n             ng-click="tagSelect($event, tag)"\n             ng-class="{ selected: isSelected(tag) }">\n            <div class="token-template" ng-bind-html="getItemName(tag)"></div>\n            <a class="token-remove" ng-show="isRemoveButtonEnabled" ng-click="tagRemove($event, $index)">Ã—</a>\n        </div>\n\n    </div>\n    <div class="token-item">\n        <input auto-grow-input\n               ng-model="tokenInputValue"\n               ng-change="onInputValueChange(tokenInputValue)"\n               ng-attr-placeholder="{{ !getTags().length ? placeholder : \'\' }}"\n               autocomplete="off"\n               ng-disabled="isDisabled">\n    </div>\n    <div class="loading" ng-show="loadingInProgress"></div>\n</div>\n')}]),function(){"use strict";function e(e,t,n,i){return{scope:{ngModel:"=",placeholder:"@",minLength:"=?",maxLength:"=?",maxItems:"=?",uniqueNames:"=?",delimiters:"@",disabled:"=?",noPersist:"=?",isRemoveButton:"=?",isRestoreOnBackspace:"=?",decorator:"=?",caretPosition:"=?",tokenInputValue:"=?",containerWidth:"=?"},replace:!0,restrict:"E",require:["ngModel","selectOptions"],templateUrl:"tags-input.html",link:function(a,o,u,s){var r=s[0],c=s[1],l=new e,d=new t(r),g=new n,f=o[0].querySelector("input");a.nameField=c.getItemNameWithoutPrefixes(),a.containerWidth=a.containerWidth?a.containerWidth:o[0].offsetWidth,a.isRemoveButtonEnabled=!0,g.set({minLength:a.minLength,maxLength:a.maxLength,maxItems:a.maxItems,nameField:a.nameField,checkUnique:a.uniqueNames});var m=function(e){a.caretPosition=e,h(e)},h=function(e){var t=o[0].getElementsByClassName("token-item");t[e]&&o[0].insertBefore(f,t[e])},p=function(){a.tokenInputValue="",f.value="",f.dispatchEvent(new CustomEvent("update")),f.focus(),a.$emit("tags-input.text_entered","")},v=function(){var e={};e[a.nameField]=a.tokenInputValue.trim(),a.noPersist!==!0&&g.canItemBeAdded(d.getAll(),e)!==!1&&(d.add(e,a.caretPosition),y(),m(a.caretPosition+1),p())},k=function(){a.tokenInputValue||a.caretPosition<=0||(m(a.caretPosition-1),f.focus())},I=function(){a.tokenInputValue||a.caretPosition>=d.count()||(m(a.caretPosition+1),f.focus())},$=function(){a.tokenInputValue||0===d.count()||(d.removeAll(l.getAll()),y(),f.dispatchEvent(new CustomEvent("update")),m(d.count()),l.clear(),f.focus())},A=function(){if(!(a.tokenInputValue||0===d.count()||a.caretPosition<=0)){if(m(a.caretPosition-1),a.isRestoreOnBackspace){var e=d.get(a.caretPosition);a.tokenInputValue=e[a.nameField]+" ",f.value=a.tokenInputValue,a.$emit("tags-input.text_entered",f.value)}d.removeAt(a.caretPosition),y(),h(a.caretPosition),f.dispatchEvent(new CustomEvent("update")),f.focus()}},V=function(){a.tokenInputValue||0===d.count()||(d.removeAt(a.caretPosition),y(),h(a.caretPosition),f.dispatchEvent(new CustomEvent("update")),a.$emit("tags-input.text_entered",f.value),f.focus())},y=function(){u.onChange&&i(function(){c.applyOnScope(u.onChange)})};a.getTags=function(){var e=r.$modelValue;return e&&!angular.isArray(e)?[e]:e},a.getItemName=function(e){var t=c.parseItemValueFromSelection(e);return t=String(t).replace(/<[^>]+>/gm,""),a.decorator?a.decorator(e):t},a.onInputValueChange=function(e){f.dispatchEvent(new CustomEvent("update")),a.$emit("tags-input.text_entered",e),l.clear()},a.isSelected=function(e){return l.has(e)},a.tagSelect=function(e,t){e.stopPropagation(),e.altKey||e.ctrlKey||e.shiftKey?l.toggle(t):(l.clear(),l.add(t)),m(d.count())},a.tagRemove=function(e,t){e.stopPropagation(),d.removeAt(t),y(),m(d.count()),l.clear(),f.blur()},o[0].addEventListener("click",function(){f.focus(),m(d.count()),l.clear(),a.$digest()}),o[0].addEventListener("keydown",function(e){switch(e.keyCode){case 65:return void(!e.ctrlKey&&!e.metaKey||a.tokenInputValue||(l.addAll(d.getAll()),a.$digest()));case 13:return v(),void a.$apply();case 37:return k(),void a.$apply();case 39:return I(),void a.$apply();case 8:return l.hasAny()?$():A(),void a.$digest();case 46:return l.hasAny()?$():V(),void a.$digest()}}),o[0].addEventListener("keypress",function(e){var t=!1;angular.forEach(a.delimiters,function(n){t===!1&&e.keyCode===n.charCodeAt(0)&&(v(),e.preventDefault(),a.$apply(),t=!0)})}),document.addEventListener("mousedown",function(){o[0].contains(event.target)||(l.clear(),m(d.count()),a.$digest())}),a.$watch("ngModel",function(){m(d.count())}),a.$watch("caretPosition",function(e,t){e!==t&&m(e)}),a.$watch("isRemoveButton",function(e){angular.isDefined(a.isRemoveButton)&&(a.isRemoveButtonEnabled=e)}),a.$on("tags-input.clear_input",function(){p()})}}}angular.module("tagsInput").directive("tagsInput",e),e.$inject=["SelectedTokensRegistry","ArrayNgModelHelper","SelectedTokensValidator","$timeout"]}(),function(){"use strict";function e(){return function(){var e;this.set=function(t){e=t},this.isUnique=function(t,n){if(!e.checkUnique)return!0;var i=!1;return angular.forEach(t,function(t){var a=t[e.nameField];a&&a.toLowerCase()===n[e.nameField].toLowerCase()&&(i=!0)}),i===!1},this.isNotEmpty=function(t){return t[e.nameField].length>0},this.isNotShort=function(t){return angular.isUndefined(e.minLength)||t[e.nameField].length>=e.minLength},this.isNotLong=function(t){return angular.isUndefined(e.maxLength)||t[e.nameField].length<=e.maxLength},this.isNotMaxAllowed=function(t){return angular.isUndefined(e.maxItems)||t<e.maxItems},this.canItemBeAdded=function(e,t){return this.isNotEmpty(t)&&this.isUnique(e,t)&&this.isNotShort(t)&&this.isNotLong(t)&&this.isNotMaxAllowed(e.length)}}}angular.module("tagsInput").factory("SelectedTokensValidator",e)}(),function(){"use strict";function e(){return function(){var e=[];this.getAll=function(){return e},this.hasAny=function(){return 0!==e.length},this.has=function(t){return-1!==e.indexOf(t)},this.add=function(t){e.push(t)},this.addAll=function(t){angular.forEach(t,function(t){e.push(t)})},this.remove=function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)},this.toggle=function(e){this.has(e)?this.remove(e):this.add(e)},this.clear=function(){e=[]}}}angular.module("tagsInput").factory("SelectedTokensRegistry",e)}(),function(){"use strict";function e(){return function(e){var t=this;t.onChange=function(t,n){t.$watch(function(){return e.$modelValue},n)},t.getAll=function(){return e.$modelValue||[]},t.get=function(e){var n=t.getAll();return n[e]},t.has=function(e){var n=t.getAll();return-1!==n.indexOf(e)},t.set=function(t){e.$setViewValue(t)},t.add=function(n,i){var a=t.getAll();a.splice(i,0,n),e.$setViewValue(a)},t.remove=function(n){var i=t.getAll(),a=i.indexOf(n);-1!==a&&i.splice(a,1),e.$setViewValue(i)},t.removeAt=function(n){var i=t.getAll();i.splice(n,1),e.$setViewValue(i)},t.removeAll=function(n){var i=t.getAll();angular.forEach(n,function(e){var t=i.indexOf(e);-1!==t&&i.splice(t,1)}),e.$setViewValue(i)},t.count=function(){return t.getAll().length}}}angular.module("tagsInput").factory("ArrayNgModelHelper",e)}();