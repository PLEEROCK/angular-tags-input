!function(){"use strict";angular.module("tagsInput",["autoGrowInput","selectOptions","disableAll","ngSanitize"])}(),angular.module("tagsInput").run(["$templateCache",function(e){e.put("tags-input.html",'<div class="token-input-container" ng-attr-style="max-width: {{ containerWidth }}px" disable-all="disabled">\n    <div ng-repeat="tag in getTags()" class="token-item">\n        <div class="token" tabindex="{{ $index }}"\n             ng-click="tagSelect($event, tag)"\n             ng-class="{ selected: isSelected(tag) }">\n            <div class="token-template" ng-bind-html="getItemName(tag)"></div>\n            <a class="token-remove" ng-show="isRemoveButton" ng-click="tagRemove($event, $index)">Ã—</a>\n        </div>\n\n    </div>\n    <div class="token-item">\n        <input auto-grow-input\n               ng-model="tokenInputValue"\n               ng-change="onInputValueChange(tokenInputValue)"\n               ng-attr-placeholder="{{ !getTags().length ? placeholder : \'\' }}"\n               autocomplete="off"\n               ng-disabled="isDisabled">\n    </div>\n    <div class="loading" ng-show="loadingInProgress"></div>\n</div>\n')}]),function(){"use strict";function e(e,t,n){return{scope:{ngModel:"=",caretPosition:"=?",minLength:"=?",maxLength:"=?",maxItems:"=?",uniqueNames:"=?",delimiters:"=?",disabled:"=?",persist:"=?",isRemoveButton:"=?",isRestoreOnBackspace:"=?",placeholder:"@",decorator:"=?",tokenInputValue:"=?",containerWidth:"=?"},replace:!0,restrict:"E",require:["ngModel","selectOptions"],templateUrl:"tags-input.html",link:function(i,a,o,u){var s=u[0],r=u[1],c=new e,l=new t(s),d=new n,g=a[0].querySelector("input");i.nameField=r.getItemNameWithoutPrefixes(),i.containerWidth=i.containerWidth?i.containerWidth:a[0].offsetWidth,i.isRemoveButton=angular.isDefined(i.isRemoveButton)?i.isRemoveButton:!0,d.set({minLength:i.minLength,maxLength:i.maxLength,maxItems:i.maxItems,nameField:i.nameField,checkUnique:i.uniqueNames});var m=function(e){i.caretPosition=e,f(e)},f=function(e){var t=a[0].getElementsByClassName("token-item");t[e]&&a[0].insertBefore(g,t[e])},h=function(){i.tokenInputValue="",g.value="",g.dispatchEvent(new CustomEvent("update")),g.focus(),i.$emit("select-tags-input.text_entered","")},p=function(){var e={};e[i.nameField]=i.tokenInputValue.trim(),d.canItemBeAdded(l.getAll(),e)!==!1&&(l.add(e,i.caretPosition),m(i.caretPosition+1),h())},v=function(){i.tokenInputValue||i.caretPosition<=0||(m(i.caretPosition-1),g.focus())},I=function(){i.tokenInputValue||i.caretPosition>=l.count()||(m(i.caretPosition+1),g.focus())},k=function(){i.tokenInputValue||0===l.count()||(l.removeAll(c.getAll()),g.dispatchEvent(new CustomEvent("update")),m(l.count()),c.clear(),g.focus())},A=function(){if(!(i.tokenInputValue||0===l.count()||i.caretPosition<=0)){if(m(i.caretPosition-1),i.isRestoreOnBackspace){var e=l.get(i.caretPosition);i.tokenInputValue=e[i.nameField]+" ",g.value=i.tokenInputValue,i.$emit("select-tags-input.text_entered",g.value)}l.removeAt(i.caretPosition),f(i.caretPosition),g.dispatchEvent(new CustomEvent("update")),g.focus()}},V=function(){i.tokenInputValue||0===l.count()||(l.removeAt(i.caretPosition),f(i.caretPosition),g.dispatchEvent(new CustomEvent("update")),i.$emit("select-tags-input.text_entered",g.value),g.focus())};i.getTags=function(){var e=s.$modelValue;return e&&!angular.isArray(e)?[e]:e},i.getItemName=function(e){var t=r.parseItemName(e);return t=String(t).replace(/<[^>]+>/gm,""),i.decorator?i.decorator(e):t},i.onInputValueChange=function(e){g.dispatchEvent(new CustomEvent("update")),i.$emit("select-tags-input.text_entered",e),c.clear()},i.isSelected=function(e){return c.has(e)},i.tagSelect=function(e,t){e.stopPropagation(),e.altKey||e.ctrlKey||e.shiftKey?c.toggle(t):(c.clear(),c.add(t)),m(l.count())},i.tagRemove=function(e,t){e.stopPropagation(),l.removeAt(t),m(l.count()),c.clear(),g.blur()},a[0].addEventListener("click",function(){g.focus(),m(l.count()),c.clear(),i.$digest()}),a[0].addEventListener("keydown",function(e){switch(e.keyCode){case 65:return void(!e.ctrlKey&&!e.metaKey||i.tokenInputValue||(c.addAll(l.getAll()),i.$digest()));case 13:return p(),void i.$apply();case 37:return v(),void i.$apply();case 39:return I(),void i.$apply();case 8:return c.hasAny()?k():A(),void i.$digest();case 46:return c.hasAny()?k():V(),void i.$digest()}}),document.addEventListener("mousedown",function(){a[0].contains(event.target)||(c.clear(),m(l.count()),i.$digest())}),i.$watch("ngModel",function(){m(l.count())}),i.$watch("caretPosition",function(e,t){e!==t&&m(e)}),i.$on("select-tags-input.clear_input",function(){h()})}}}angular.module("tagsInput").directive("tagsInput",e),e.$inject=["SelectedTokensRegistry","ArrayNgModelHelper","SelectedTokensValidator"]}(),function(){"use strict";function e(){return function(){var e;this.set=function(t){e=t},this.isUnique=function(t,n){if(!e.checkUnique)return!0;var i=!1;return angular.forEach(t,function(t){var a=t[e.nameField];a&&a.toLowerCase()===n[e.nameField].toLowerCase()&&(i=!0)}),i===!1},this.isNotEmpty=function(t){return t[e.nameField].length>0},this.isNotShort=function(t){return angular.isUndefined(e.minLength)||t[e.nameField].length>=e.minLength},this.isNotLong=function(t){return angular.isUndefined(e.maxLength)||t[e.nameField].length<=e.maxLength},this.isNotMaxAllowed=function(t){return angular.isUndefined(e.maxItems)||t<e.maxItems},this.canItemBeAdded=function(e,t){return this.isNotEmpty(t)&&this.isUnique(e,t)&&this.isNotShort(t)&&this.isNotLong(t)&&this.isNotMaxAllowed(e.length)}}}angular.module("tagsInput").factory("SelectedTokensValidator",e)}(),function(){"use strict";function e(){return function(){var e=[];this.getAll=function(){return e},this.hasAny=function(){return 0!==e.length},this.has=function(t){return-1!==e.indexOf(t)},this.add=function(t){e.push(t)},this.addAll=function(t){angular.forEach(t,function(t){e.push(t)})},this.remove=function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)},this.toggle=function(e){this.has(e)?this.remove(e):this.add(e)},this.clear=function(){e=[]}}}angular.module("tagsInput").factory("SelectedTokensRegistry",e)}(),function(){"use strict";function e(){return function(e){var t=this;t.onChange=function(t,n){t.$watch(function(){return e.$modelValue},n)},t.getAll=function(){return e.$modelValue||[]},t.get=function(e){var n=t.getAll();return n[e]},t.has=function(e){var n=t.getAll();return-1!==n.indexOf(e)},t.set=function(t){e.$setViewValue(t)},t.add=function(n,i){var a=t.getAll();a.splice(i,0,n),e.$setViewValue(a)},t.remove=function(n){var i=t.getAll(),a=i.indexOf(n);-1!==a&&i.splice(a,1),e.$setViewValue(i)},t.removeAt=function(n){var i=t.getAll();i.splice(n,1),e.$setViewValue(i)},t.removeAll=function(n){var i=t.getAll();angular.forEach(n,function(e){var t=i.indexOf(e);-1!==t&&i.splice(t,1)}),e.$setViewValue(i)},t.count=function(){return t.getAll().length}}}angular.module("tagsInput").factory("ArrayNgModelHelper",e)}();